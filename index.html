<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content><meta name="keywords" content><meta name="author" content="Rr-shan,undefined"><meta name="copyright" content="Rr-shan"><title>【Sanzzi】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="icon" href="/favicon.ico"><!-- script(src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML")--><script src="/js/mathjax/mathjax.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});
</script><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
}</script></head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="author-info"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.png"></div><div class="author-info-name">Rr-shan</div><div class="author-info-description"></div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/Rr-shan" target="_blank">GitHub<i class="icon-dot bg-color9"></i></a><a class="links-button button-hover" href="mailto:1224559633@qq.com" target="_blank">E-Mail<i class="icon-dot bg-color2"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">16</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">3</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/tags">标签</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="title-name" href="/">Sanzzi</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><div id="recent-posts"><!-- each post in page.posts.sort('date', -1).limit(10).toArray()--><!-- config中配置按照什么排序--><div class="recent-post-item"><a class="post-title" href="/2020/02/06/账号中心/"></a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2020-02-06</time></div><div class="post-content"><div class="main-content content"></div></div><a class="button-hover more" href="/2020/02/06/账号中心/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2020/02/05/hexo出现问题了/"></a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2020-02-05</time></div><div class="post-content"><div class="main-content content"></div></div><a class="button-hover more" href="/2020/02/05/hexo出现问题了/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2020/02/05/yc的聊天器（Ubuntu）/"></a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2020-02-05</time></div><div class="post-content"><div class="main-content content"></div></div><a class="button-hover more" href="/2020/02/05/yc的聊天器（Ubuntu）/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2020/02/03/人脸识别的项目/"></a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2020-02-04</time></div><div class="post-content"><div class="main-content content"><p><strong>缺失文件haarcascades—各种分类器xml文件下载地址</strong><br>在github上面下载的速度实在是太慢了</p>
<blockquote>
<p>链接：<a href="https://pan.baidu.com/s/1UECA2mPDwqMrhLfWaRTi8g" target="_blank" rel="noopener">https://pan.baidu.com/s/1UECA2mPDwqMrhLfWaRTi8g</a><br>提取码：gqvl </p>
</blockquote>
<p><strong>安装dlib模块踩坑</strong><br>网上各种各样的方法，boost,cmake,还需要VS，非常十分复杂，我怀着想要简约一些的方式开始bing。</p>
<p>避开最复杂的做法</p>
<p>找相对简单的做法：<br><em>conda安装最新的dlib</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install -c menpo dlib=19.9</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda install -c conda-forge dlib</span><br><span class="line">conda install -c conda-forge/label/cf201901 dlib</span><br></pre></td></tr></table></figure>

<h4 id="报错1："><a href="#报错1：" class="headerlink" title="报错1："></a>报错1：</h4><p>网络连接不上</p>
<p><em>windows 通过whl文件安装dlib</em></p>
<blockquote>
<p><a href="https://blog.csdn.net/weixin_39954229/article/details/81878864" target="_blank" rel="noopener">https://blog.csdn.net/weixin_39954229/article/details/81878864</a><br>可以下载这个dlib-19.7.0-cp36-cp36m-win_amd64.whl</p>
</blockquote>
<blockquote>
<p><a href="https://www.jianshu.com/p/8296f2aac1aa" target="_blank" rel="noopener">https://www.jianshu.com/p/8296f2aac1aa</a><br>中可以下载dlib-19.8.1-cp36-cp36m-win_amd64.whl</p>
</blockquote>
<blockquote>
<p><a href="https://pypi.org/simple/dlib/" target="_blank" rel="noopener">https://pypi.org/simple/dlib/</a> 这链接几乎啥版本都有</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install D:\Downloads\dlib-19.7.0-cp36-cp36m-win_amd64.whl</span><br><span class="line">一定要注意文件的路径</span><br></pre></td></tr></table></figure>

<h4 id="报错2："><a href="#报错2：" class="headerlink" title="报错2："></a>报错2：</h4><p>ERROR: dlib-19.7.0-cp36-cp36m-win_amd64.whl is not a supported wheel on this platform.</p>
<p>原因1：版本不匹配（Python和包（库）不兼容）<br>如何查看<br>参照博客<a href="https://blog.csdn.net/xiuxiuen_michelle/article/details/81080694" target="_blank" rel="noopener">https://blog.csdn.net/xiuxiuen_michelle/article/details/81080694</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line">import pip._internal</span><br><span class="line">print(pip._internal.pep425tags.get_supported())</span><br></pre></td></tr></table></figure>

<p>发现了问题，cp37才可以，之前是cp36的，以上提供的版本对Python来说无用。</p>
<p>感人的是，知乎上Python回答者居然提供了cp37的</p>
<blockquote>
<p><a href="https://pan.baidu.com/s/1MKqW7WH2XP-J8MOLeq3cDA" target="_blank" rel="noopener">https://pan.baidu.com/s/1MKqW7WH2XP-J8MOLeq3cDA</a><br>提取码：rfh8</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install D:\Downloads\dlib-19.17.99-cp37-cp37m-win_amd64.whl</span><br></pre></td></tr></table></figure>

<p><strong>安装face_recognition人脸识别库</strong><br>安装了dlib后还是安装不成功</p>
<p>方法一：先安装cmake再安装face_recognition<br>但是cmake也不能直接pip,cmake的安装非常复杂（stop）<br>方法二：用whl文件<br><a href="https://pypi.org/project/pip/20.0.2/#files下载" target="_blank" rel="noopener">https://pypi.org/project/pip/20.0.2/#files下载</a><br>pip-20.0.2-py2.py3-none-any.whl </p>
<p><strong>缺失文件shape_predictor_68_face_landmarks.dat</strong></p>
<blockquote>
<p><a href="https://pan.baidu.com/s/1Z1a_ud__BWXgCWZeSdpL2g" target="_blank" rel="noopener">https://pan.baidu.com/s/1Z1a_ud__BWXgCWZeSdpL2g</a><br>提取码：lzjy</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\\Anaconda\\Lib\\site-packages\\dlib-data\\shape_predictor_68_face_landmarks.dat</span><br></pre></td></tr></table></figure>

</div></div><a class="button-hover more" href="/2020/02/03/人脸识别的项目/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2020/02/03/MySQL踩坑手记/">MySQL安装踩坑手记</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2020-02-03</time></div><div class="post-content"><div class="main-content content"><p>傻瓜式的安装（Windows下）我都能弄得一团糟！还是勉励一句，==踩坑就是要越挫越勇的。==<br>倒叙。[^1]<br>[^1]：倒叙入口</p>
<ol>
<li>配置初始化的my.ini文件（在安装根目录下添加 my.ini）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"># 设置3306端口</span><br><span class="line">port=3306</span><br><span class="line"># 设置mysql的安装目录</span><br><span class="line">basedir=D:\\Downloads\\mysql-8.0.19-winx64\\mysql-8.0.19-winx64   # 切记此处一定要用双斜杠\\，单斜杠我这里会出错，不过看别人的教程，有的是单斜杠。自己尝试吧</span><br><span class="line"># 设置mysql数据库的数据的存放目录</span><br><span class="line">datadir=D:\\Downloads\\mysql-8.0.19-winx64\\mysql-8.0.19-winx64\\data   # 此处同上</span><br><span class="line"># 允许最大连接数</span><br><span class="line">max_connections=200</span><br><span class="line"># 允许连接失败的次数。这是为了防止有人从该主机试图攻击数据库系统</span><br><span class="line">max_connect_errors=10</span><br><span class="line"># 服务端使用的字符集默认为UTF8</span><br><span class="line">character-set-server=utf8</span><br><span class="line"># 创建新表时将使用的默认存储引擎</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line"># 默认使用“mysql_native_password”插件认证</span><br><span class="line">default_authentication_plugin=mysql_native_password</span><br><span class="line">[mysql]</span><br><span class="line"># 设置mysql客户端默认字符集</span><br><span class="line">default-character-set=utf8</span><br><span class="line">[client]</span><br><span class="line"># 设置mysql客户端连接服务端时默认使用的端口</span><br><span class="line">port=3306</span><br><span class="line">default-character-set=utf8</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>我的胡来操作，不按照正常的顺序</p>
<ol start="2">
<li>在MySQL安装目录的 bin 目录下执行命令：<blockquote>
<p>mysql -u root -p</p>
</blockquote>
</li>
</ol>
<h4 id="报错1"><a href="#报错1" class="headerlink" title="报错1:"></a>报错1:</h4><ul>
<li>无法启动此程序，因为计算机丢失VCRUNTIME140_1.dll。尝试重新安装该程序以解决此问题</li>
</ul>
<p>图片</p>
<p>bing之后发现很可能是昨天在尝试将一些无良广告页面弹出的文件删除的过程中，不小心将一个重要的文件删除掉了，而且还把回收站彻底清空了。于是开始想方设法安装……</p>
<h4 id="报错2："><a href="#报错2：" class="headerlink" title="报错2："></a>报错2：</h4><ul>
<li>Visual C++ Redistributable for Visual Studio 2015 下载失败,日志文件中的报错是e000: Error 0x80070666: Cannot install a product when a newer version is installed.</li>
</ul>
<p>bing说要新版本，还有2017和2019的，我下载了2019的成功了。</p>
<blockquote>
<p><a href="https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads" target="_blank" rel="noopener">https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads</a></p>
</blockquote>
<p>重新尝试</p>
<blockquote>
<p>mysql -u root -p</p>
</blockquote>
<h4 id="报错3："><a href="#报错3：" class="headerlink" title="报错3："></a>报错3：</h4><ul>
<li>ERROR 2003 (HY000): Can’t connect to MySQL server on ‘localhost’ (10061)</li>
</ul>
<p>解决步骤 如网址<a href="https://jingyan.baidu.com/article/a681b0de5ac1dc3b1943467d.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/a681b0de5ac1dc3b1943467d.html</a><br>关键步骤有<br>打开 <strong>计算机管理</strong>中的<strong>服务</strong>查看MySQL </p>
<ol>
<li>是否安装 N —— 手动 mysql -install</li>
<li>安装后点开后<strong>启动</strong>运行</li>
</ol>
<h4 id="报错4："><a href="#报错4：" class="headerlink" title="报错4："></a>报错4：</h4><ul>
<li>MySQL服务无法启动,服务中点启动报错，还可以在终端中输入<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net start mysql</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>怎么解决MySQL没法启动的问题?<br><a href="https://jingyan.baidu.com/article/b24f6c820a029b86bfe5da3c.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/b24f6c820a029b86bfe5da3c.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">关键步骤：</span><br><span class="line">将my.ini移至bin目录下。</span><br><span class="line">mysqld --initialize --user=mysql --console记录临时密码</span><br><span class="line">再到服务中启动MySQL成功</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>改密码：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin -u USER -p password PASSWORD</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="报错5："><a href="#报错5：" class="headerlink" title="报错5："></a>报错5：</h4><ul>
<li><p>mysqladmin: connect to server at ‘localhost’ failed<br>error: ‘Access denied for user ‘root’@’localhost</p>
<p>进入MySQL去修改密码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED WITH mysql_native_password BY &apos;新密码&apos;;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>终于可以算是大功告成了！撒花完结</p>
<p>倒叙入口</p>
<blockquote>
<p>一开始是准备跟着b站的视频教程安装的（相比各式各样（鱼龙混杂）的博客来说，可行性更强），但是在安装MySQL installer的时候，不小心乱键入，七七八八错了章法。<br>于是想删掉胡乱的设定，重新安装。不幸的是，我把原有的全部情空了，除了Connector/NET怎么也删除不了。<br>之后删了MySQL这个文件，重返官网下载，但是发现已经不会再给初始化设定了，我也只剩Connector/NET。于是念叨着找老版本是不是就可以重新有初始化设定，由于网速的原因，花了五六个小时下载旧版本却发现还是Connector/NET。<br>没有办法了，于是想办法把原有的各种功能加回来，但是发现怎么Add也行不。非常沮丧，觉得Windows下的MySQL是安装不成功的了。<br>暂时放下MySQL Installer，转而翻看博客来找办法。进官网下载了普通的MySQL文件，按照步骤进行 ————</p>
</blockquote>
<p>按照这篇博客上面的顺序会比较完整<br><a href="https://blog.csdn.net/qq_43037478/article/details/88976024" target="_blank" rel="noopener">https://blog.csdn.net/qq_43037478/article/details/88976024</a></p>
</div></div><a class="button-hover more" href="/2020/02/03/MySQL踩坑手记/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2020/02/01/寒假leedcode十题/">leedcode十题</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2020-02-01</time></div><div class="post-content"><div class="main-content content"><ol>
<li><p>快乐数字</p>
<blockquote>
<p>一个“快乐数”定义为：对于一个正整数，每一次将该数替换为它每个位置上的数字的平方和，然后重复这个过程直到这个数变为 1，也可能是无限循环但始终变不到 1。如果可以变为 1，那么这个数就是快乐数。</p>
</blockquote>
</li>
</ol>
<p>关键判断：若不是快乐数，会进入死循环，如何终至死循环，将每次变换过后的值存入HashSet中，判断是否出现过重复值，出现则return false;<br>Java<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public boolean isHappy(int n) &#123;</span><br><span class="line">        Set&lt;Integer&gt; set = new HashSet&lt;&gt;();</span><br><span class="line">        set.add(n);</span><br><span class="line">        while(n != 1)&#123;</span><br><span class="line">            n = change(n);</span><br><span class="line">            if(set.contains(n)) return false;</span><br><span class="line">            set.add(n);</span><br><span class="line">        &#125;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public int change(int n)&#123;</span><br><span class="line">        int sum = 0;</span><br><span class="line">        int num;</span><br><span class="line">        while(n != 0)&#123;</span><br><span class="line">            num = n%10;</span><br><span class="line">            n /= 10;</span><br><span class="line">            sum += num*num;</span><br><span class="line">        &#125;</span><br><span class="line">        return sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p> C++</p>
<blockquote>
<p>此题不建议用集合记录每次的计算结果来判断是否进入循环，因为这个集合可能大到无法存储；另外，也不建议使用递归，同理，如果递归层次较深，会直接导致调用栈崩溃。不要因为这个题目给出的整数是int型而投机取巧。</p>
</blockquote>
<p>python3</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def isHappy(self, n):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type n: int</span><br><span class="line">        :rtype: bool</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        already = set()</span><br><span class="line">        </span><br><span class="line">        while n != 1:</span><br><span class="line">            num = 0</span><br><span class="line">            while n &gt; 0:</span><br><span class="line">                tmp = n % 10</span><br><span class="line">                num += tmp**2</span><br><span class="line">                n //= 10</span><br><span class="line">            </span><br><span class="line">            if num in already:</span><br><span class="line">                return False</span><br><span class="line">            else:</span><br><span class="line">                already.add(num)</span><br><span class="line">            </span><br><span class="line">            n = num</span><br><span class="line">            </span><br><span class="line">        return True</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>旋转字符串</li>
</ol>
<blockquote>
<p>给定两个字符串, A 和 B。A 的旋转操作就是将 A 最左边的字符移动到最右边。 例如, 若 A = ‘abcde’，在移动一次之后结果就是’bcdea’ 。如果在若干次旋转操作之后，A 能变成B，那么返回True。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static boolean rotateString(String A, String B) &#123;</span><br><span class="line">        return A.length() == B.length() &amp;&amp; (A+A).contains(B);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>两个拼起来就包含了所有的情况</p>
<ol start="3">
<li>字母大小写全排列</li>
</ol>
<blockquote>
<p>给定一个字符串S，通过将字符串S中的每个字母转变大小写，我们可以获得一个新的字符串。返回所有可能得到的字符串集合。</p>
</blockquote>
<p>回溯算法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public class Solution &#123;</span><br><span class="line"></span><br><span class="line">    public List&lt;String&gt; letterCasePermutation(String S) &#123;</span><br><span class="line">        int len = S.length();</span><br><span class="line">        List&lt;String&gt; res = new ArrayList&lt;&gt;();</span><br><span class="line">        if (len == 0) &#123;</span><br><span class="line">            return res;</span><br><span class="line">        &#125;</span><br><span class="line">        char[] charArray = new char[len];</span><br><span class="line">        dfs(S, 0, len, charArray, res);</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void dfs(String S, int start, int len, char[] charArray, List&lt;String&gt; res) &#123;</span><br><span class="line">        if (start == len) &#123;</span><br><span class="line">            res.add(new String(charArray));</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        charArray[start] = S.charAt(start);</span><br><span class="line">        dfs(S, start + 1, len, charArray, res);</span><br><span class="line"></span><br><span class="line">        // 如果是字符，就可以派生出一个新分支</span><br><span class="line">        if (Character.isLetter(S.charAt(start))) &#123;</span><br><span class="line">            // 这一步直接修改，相当于回溯</span><br><span class="line">            charArray[start] = (char) (S.charAt(start) ^ (1 &lt;&lt; 5));</span><br><span class="line">            dfs(S, start + 1, len, charArray, res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>存在重复元素</li>
</ol>
<blockquote>
<p>给定一个整数数组，判断是否存在重复元素。如果任何值在数组中出现至少两次，函数返回 true。如果数组中每个元素都不相同，则返回 false。</p>
</blockquote>
<p>哈希表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public boolean containsDuplicate(int[] nums) &#123;</span><br><span class="line">    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(nums.length);</span><br><span class="line">    for (int x: nums) &#123;</span><br><span class="line">        if (set.contains(x)) return true;</span><br><span class="line">        set.add(x);</span><br><span class="line">    &#125;</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>各位相加</li>
</ol>
<blockquote>
<p>给定一个非负整数 num，反复将各个位上的数字相加，直到结果为一位数。</p>
</blockquote>
<p>神奇的算法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public int addDigits(int num) &#123;</span><br><span class="line">    return (num - 1) % 9 + 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>柠檬水找零</li>
</ol>
<blockquote>
<p>在柠檬水摊上，每一杯柠檬水的售价为 5 美元。顾客排队购买你的产品，（按账单 bills 支付的顺序）一次购买一杯。每位顾客只买一杯柠檬水，然后向你付 5 美元、10 美元或 20 美元。你必须给每个顾客正确找零，也就是说净交易是每位顾客向你支付 5 美元。注意，一开始你手头没有任何零钱。如果你能给每位顾客正确找零，返回 true ，否则返回 false </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public boolean lemonadeChange(int[] bills) &#123;</span><br><span class="line">        if (bills == null || bills.length &lt; 1) &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        if (bills[0] != 5) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        int money[] = new int[3];// 5 10 15</span><br><span class="line">        money[0]++;</span><br><span class="line">        </span><br><span class="line">        for (int i = 1;i &lt; bills.length;i++) &#123;</span><br><span class="line">            switch (bills[i]) &#123;</span><br><span class="line">                case 5:</span><br><span class="line">                    money[0]++;</span><br><span class="line">                    </span><br><span class="line">                    break;</span><br><span class="line">                case 10:</span><br><span class="line">                    money[1]++;</span><br><span class="line">                    money[0]--;</span><br><span class="line">                    </span><br><span class="line">                    if (money[0] &lt; 0) &#123;</span><br><span class="line">                        return false;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    break;</span><br><span class="line">                case 20:</span><br><span class="line">                    money[2]++;</span><br><span class="line">                    if (money[1] &gt; 0) &#123;</span><br><span class="line">                        money[1]--;</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        money[0] -= 2;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    money[0]--;</span><br><span class="line">                    </span><br><span class="line">                    if (money[0] &lt; 0) &#123;</span><br><span class="line">                        return false;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><a class="button-hover more" href="/2020/02/01/寒假leedcode十题/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/12/06/聚类的评估指标/">聚类的评估指标</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-12-06</time></div><div class="post-content"><div class="main-content content"><ul>
<li>轮廓系数（Silhouette Coefficient）</li>
<li>Calinski-Harabaz 指数</li>
<li>调整兰德系数（Adjusted Rand index，ARI）</li>
<li>互信息（Adjusted Mutual Information，AMI）</li>
<li>V-measure</li>
<li>Fowlkes-Mallows Index（FMI）</li>
</ul>
<h3 id="轮廓系数（Silhouette-Coefficient）"><a href="#轮廓系数（Silhouette-Coefficient）" class="headerlink" title="轮廓系数（Silhouette Coefficient）"></a>轮廓系数（Silhouette Coefficient）</h3><ul>
<li>内部指标</li>
<li>选择合适的聚类数目</li>
<li>根据折线图可直观的找到系数变化幅度最大的点，认为发生畸变幅度最大的点就是最好的聚类数目。</li>
</ul>
<h3 id="Calinski-Harabaz-指数"><a href="#Calinski-Harabaz-指数" class="headerlink" title="Calinski-Harabaz 指数"></a>Calinski-Harabaz 指数</h3><ul>
<li>内部指标</li>
<li>选择合适的聚类数目，运算速度远高于轮廓系数</li>
<li>当内部数据的协方差越小，类别之间的协方差越大，Calinski-Harabasz分数越高。 越大越好</li>
</ul>
<h3 id="调整兰德系数（Adjusted-Rand-index，ARI）"><a href="#调整兰德系数（Adjusted-Rand-index，ARI）" class="headerlink" title="调整兰德系数（Adjusted Rand index，ARI）"></a>调整兰德系数（Adjusted Rand index，ARI）</h3><ul>
<li>外部指标</li>
<li>用来衡量两个分布的吻合程度，取值范围[-1,1],数值越接近于1越好<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.metrics import adjusted_rand_score</span><br><span class="line">labels_true = [0, 0, 1, 1, 0, 1] # 这个值是可以由自己设置的</span><br><span class="line">labels_pred = [0, 0, 1, 1, 1, 2]</span><br><span class="line">ari=adjusted_rand_score(labels_true, labels_pred)  </span><br><span class="line">print(&apos;兰德系数为：%f&apos;%(ari))</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="互信息（Adjusted-Mutual-Information，AMI）"><a href="#互信息（Adjusted-Mutual-Information，AMI）" class="headerlink" title="互信息（Adjusted Mutual Information，AMI）"></a>互信息（Adjusted Mutual Information，AMI）</h3><ul>
<li>外部指标</li>
<li>用来衡量两个分布的吻合程度，取值范围[-1,1],数值越接近于1越好<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.metrics import adjusted_mutual_info_score</span><br><span class="line">labels_true = [0, 0, 1, 1, 0, 1]</span><br><span class="line">labels_pred = [0, 0, 1, 1, 4, 2]</span><br><span class="line">ami=adjusted_mutual_info_score(labels_true, labels_pred) </span><br><span class="line">print(&apos;互信息为：%f&apos;%(ami))</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="V-measure"><a href="#V-measure" class="headerlink" title="V-measure"></a>V-measure</h3><ul>
<li>外部指标</li>
<li>同质性（homogeneity）：每个群集只包含单个类的成员。</li>
<li>完整性（completeness）：给定类的所有成员都分配给同一个群集。</li>
<li>V-measure是两者的调和平均。V-measure取值范围为 [0,1]，越大越好，但当样本量较小或聚类数据较多的情况，推荐使用AMI和ARI。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from sklearn import metrics</span><br><span class="line">labels_true = [0, 0, 0, 1, 1, 1]</span><br><span class="line">labels_pred = [0, 0, 1, 1, 2, 2]</span><br><span class="line">h_score=metrics.homogeneity_score(labels_true, labels_pred)</span><br><span class="line">c_score=metrics.completeness_score(labels_true, labels_pred) </span><br><span class="line">V_measure=metrics.v_measure_score(labels_true, labels_pred)    </span><br><span class="line">print(&apos;h_score为：%f \nc_score为：%f \nV_measure为：%f&apos;%(h_score,c_score,V_measure))</span><br><span class="line">#h_score为：0.666667 </span><br><span class="line">#c_score为：0.420620 </span><br><span class="line">#V_measure为：0.515804</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Fowlkes-Mallows-Index（FMI）"><a href="#Fowlkes-Mallows-Index（FMI）" class="headerlink" title="Fowlkes-Mallows Index（FMI）"></a>Fowlkes-Mallows Index（FMI）</h3><ul>
<li>外部指标</li>
<li>FMI是对聚类结果和真实值计算得到的召回率和精确率，进行几何平均的结果，取值范围为 [0,1]，越接近1越好。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.metrics import fowlkes_mallows_score</span><br><span class="line">labels_true = [0, 0, 0, 1, 1, 1]</span><br><span class="line">labels_pred = [0, 0, 1, 1, 2, 2]</span><br><span class="line">fmi=fowlkes_mallows_score(labels_true, labels_pred)  </span><br><span class="line">print(&apos;FMI为：%f&apos;%(fmi))</span><br><span class="line">#FMI为：0.471405</span><br></pre></td></tr></table></figure>

</li>
</ul>
<blockquote>
<p>一般情况下，主要是对无y值的数据进行聚类操作。如果在评价中用到外部指标，就需通过人工标注等方法获取y值，成本较高，因此内部指标的实际实用性更强。</p>
</blockquote>
<p><a href="https://blog.csdn.net/sinat_26917383/article/details/70577710" target="_blank" rel="noopener">https://blog.csdn.net/sinat_26917383/article/details/70577710</a><br>有原理的解释</p>
</div></div><a class="button-hover more" href="/2019/12/06/聚类的评估指标/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/12/04/新浪微博首页爬虫小demo/">新浪微博首页爬虫小demo</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-12-05</time></div><div class="post-content"><div class="main-content content"><p>HTTPError 是 URLError的子类<br>URLError</p>
<ol>
<li>连不上服务器</li>
<li>不存在</li>
<li>本地没有网络</li>
<li>HTTPError<br>使用URLError就完事了<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import urllib.error</span><br><span class="line">import urllib.request</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    urllib.request.urlopen(&quot;thhp://blog.csdn.net&quot;)</span><br><span class="line">except urllib.error.URLError as e:</span><br><span class="line">    if hasattr(e,&quot;code&quot;): # 判断是否有状态码</span><br><span class="line">        print(e.code)</span><br><span class="line">    if hasattr(e,&quot;reason&quot;): # 原因</span><br><span class="line">        print(e.reason)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="模拟成浏览器"><a href="#模拟成浏览器" class="headerlink" title="模拟成浏览器"></a>模拟成浏览器</h3><p>才被允许爬取，浏览器伪装一般通过报头进行 headers中的 user-agent 这个需要通过F12查找，可以刷新找到</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request</span><br><span class="line">url =&quot;https://i.csdn.net/#/uc/collection-list&quot;</span><br><span class="line">header=(&quot;User-Agent&quot;,&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Safari/537.36&quot;)</span><br><span class="line">opener=urllib.request.build_opener()</span><br><span class="line">opener.addheaders=[header]</span><br><span class="line">data=opener.open(url).read()</span><br><span class="line">fh=open(&quot;C:/Users/Administrator/Desktop/hello.html&quot;,&quot;wb&quot;) #html文件的打开方式地址的斜杠是相反的</span><br><span class="line">fh.write(data)</span><br><span class="line">fh.close()</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import re</span><br><span class="line">import urllib.request</span><br><span class="line"></span><br><span class="line">##新浪新闻打不开，用网易新闻代替好了</span><br><span class="line">data=urllib.request.urlopen(&quot;https://news.sina.com.cn/&quot;).read()</span><br><span class="line">data1 = data.decode(&quot;gbk&quot;) # 这个设置为gbk居然可以了 ，这种问题在之后是常常遇到的</span><br><span class="line"></span><br><span class="line"># data1=data.decode(&quot;utf-8&quot;,&quot;ignore&quot;)</span><br><span class="line"># 忽视了的话出现的问题也很不友好！ “ҵʱ±Żվ&quot;”</span><br><span class="line"></span><br><span class="line"># Crrl+F键 可以查找</span><br><span class="line"></span><br><span class="line">pat = &apos;href=&quot;(https://news.sina.com.cn/.*?)&quot;&gt;&apos;</span><br><span class="line">allurl = re.compile(pat).findall(data1)</span><br><span class="line"># for i in allurl</span><br><span class="line"></span><br><span class="line">for i in range(0,len(allurl)):</span><br><span class="line">    try:</span><br><span class="line">        print(&quot;第&quot;+str(i)+&quot;次爬取&quot;)</span><br><span class="line">        thisurl=allurl[i]</span><br><span class="line">        file= &quot;C:/Users/Administrator/Desktop/爬虫/&quot; + str(i)+&quot;.html&quot;</span><br><span class="line">        urllib.request.urlretrieve(thisurl,file)</span><br><span class="line">    except urllib.error.URLError as e:</span><br><span class="line">        if hasattr(e,&quot;code&quot;):</span><br><span class="line">            print(e.code)</span><br><span class="line">        if hasattr(e,&quot;reason&quot;):</span><br><span class="line">            print(e.reason)</span><br><span class="line"># 遇到异常真的直接就崩掉了！</span><br><span class="line"># 这次循环出现问题会跳到下一次循环当中？！</span><br><span class="line"># 循环爬取文章！ 以及伪装浏览器 CSDN</span><br></pre></td></tr></table></figure>

<p>正则表达式的使用： 单引号和双引号的注意点</p>
<h2 id="淘宝爬图"><a href="#淘宝爬图" class="headerlink" title="淘宝爬图"></a>淘宝爬图</h2><p>已经爬不到了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request</span><br><span class="line">import re</span><br><span class="line">keyname=&quot;半身裙&quot;</span><br><span class="line">key=urllib.request.quote(keyname) # 因为无法识别，进行编码操作</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">headers = (&quot;User-Agent&quot;,&quot;&quot;)</span><br><span class="line">opener=urllib.request.build_opener()</span><br><span class="line">opener.addheaders=[headers]</span><br><span class="line">urllib.request.install_opener(opener)</span><br><span class="line"># 不是网址有问题</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">for i in range(1,20): # 爬取0到100页?</span><br><span class="line">    url=&quot;https://s.taobao.com/list?spm=a21bo.2017.201867-links-0.18.5af911d9Vko7z7&amp;q=&quot;+key+&quot;&amp;cat=16&amp;style=grid&amp;seller_type=taobao&amp;bcoffset=0&amp;s=&quot;+str(i*60)</span><br><span class="line">    data=urllib.request.urlopen(url).read().decode(&quot;utf-8&quot;,&quot;ignore&quot;)</span><br><span class="line">    pat=&apos;pic_url&quot;:&quot;//(.*?)&quot;&apos; # 正则表达式还是有问题</span><br><span class="line">    imageurl=re.compile(pat).findall(data)</span><br><span class="line">    print(imageurl)</span><br></pre></td></tr></table></figure>

<p>如何分析url<br><a href="https://s.taobao.com/list?spm=a21bo.2017.201867-links-0.18.5af911d9Vko7z7&amp;q=%E5%8D%8A%E8%BA%AB%E8%A3%99&amp;cat=16&amp;style=grid&amp;seller_type=taobao&amp;bcoffset=0&amp;s=60" target="_blank" rel="noopener">https://s.taobao.com/list?spm=a21bo.2017.201867-links-0.18.5af911d9Vko7z7&amp;q=%E5%8D%8A%E8%BA%AB%E8%A3%99&amp;cat=16&amp;style=grid&amp;seller_type=taobao&amp;bcoffset=0&amp;s=60</a><br><a href="https://s.taobao.com/list?spm=a21bo.2017.201867-links-0.18.5af911d9Vko7z7&amp;q=%E5%8D%8A%E8%BA%AB%E8%A3%99&amp;cat=16&amp;style=grid&amp;seller_type=taobao&amp;bcoffset=0&amp;s=120" target="_blank" rel="noopener">https://s.taobao.com/list?spm=a21bo.2017.201867-links-0.18.5af911d9Vko7z7&amp;q=%E5%8D%8A%E8%BA%AB%E8%A3%99&amp;cat=16&amp;style=grid&amp;seller_type=taobao&amp;bcoffset=0&amp;s=120</a></p>
<p>q到&amp;cat前截止，都是可以变的，是搜索词<br>是为了找规律，以便从一到一百页<br>s !!! s+=60 第一页是0</p>
<p>抓包分析的目的是为了找到真实的js地址，没有在源码中，就一定隐藏在相应js中，最后没有别的尝试的时候才抓包<br>抓包工具 fiddler<br>需要手动配置代理<br>如何抓包 最后几分钟<br><a href="https://www.bilibili.com/video/av22571713?p=23" target="_blank" rel="noopener">https://www.bilibili.com/video/av22571713?p=23</a></p>
</div></div><a class="button-hover more" href="/2019/12/04/新浪微博首页爬虫小demo/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/11/30/爬虫大体结构/">爬虫大体结构</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-11-30</time></div><div class="post-content"><div class="main-content content"><p>爬虫框架<br>抓取、分析、存储</p>
<h2 id="抓取"><a href="#抓取" class="headerlink" title="抓取"></a>抓取</h2><ol>
<li>最基本的抓取<blockquote>
<p>urllib urllib2 requests  httplib2()</p>
</blockquote>
</li>
<li>对于登陆情况的处理</li>
</ol>
<ul>
<li>使用表单登陆<blockquote>
<p>这种情况属于post请求，即先向服务器发送表单数据，服务器再将返回的cookie存入本地。</p>
</blockquote>
</li>
<li>使用cookie登陆<blockquote>
<p>使用cookie登陆，服务器会认为你是一个已登陆的用户，所以就会返回给你一个已登陆的内容。</p>
</blockquote>
</li>
</ul>
<ol start="3">
<li>对于反爬虫机制的处理</li>
</ol>
<ul>
<li>使用代理<blockquote>
<p>适用情况：限制IP地址情况，也可解决由于“频繁点击”而需要输入验证码登陆的情况。</p>
</blockquote>
</li>
<li>时间设置<blockquote>
<p>限制频率情况  import time time.sleep(1)</p>
</blockquote>
</li>
<li>伪装成浏览器，或者反“反盗链”</li>
</ul>
<ol start="4">
<li>对于断线重连</li>
<li>多进程抓取6</li>
<li>对于Ajax请求的处理 解决隐藏的代码（JS</li>
<li>自动化测试工具Selenium 自动化测试工具——实现操纵浏览器</li>
<li>验证码识别</li>
</ol>
<p>##　分析</p>
<ol>
<li>正则表达式，BeautifulSoup，lxml</li>
</ol>
<h2 id="存储"><a href="#存储" class="headerlink" title="存储"></a>存储</h2><ol>
<li>存入文本文件</li>
<li>MySQL或MongoDB数据库</li>
</ol>
<h3 id="Robots协议"><a href="#Robots协议" class="headerlink" title="Robots协议"></a>Robots协议</h3><h3 id="基于Scrapy网络爬虫的搭建-http-www-lining0806-com-E5-9F-BA-E4-BA-8Escrapy-E7-BD-91-E7-BB-9C-E7-88-AC-E8-99-AB-E7-9A-84-E6-90-AD-E5-BB-BA"><a href="#基于Scrapy网络爬虫的搭建-http-www-lining0806-com-E5-9F-BA-E4-BA-8Escrapy-E7-BD-91-E7-BB-9C-E7-88-AC-E8-99-AB-E7-9A-84-E6-90-AD-E5-BB-BA" class="headerlink" title="基于Scrapy网络爬虫的搭建 http://www.lining0806.com/%E5%9F%BA%E4%BA%8Escrapy%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E7%9A%84%E6%90%AD%E5%BB%BA/"></a>基于Scrapy网络爬虫的搭建 <a href="http://www.lining0806.com/%E5%9F%BA%E4%BA%8Escrapy%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E7%9A%84%E6%90%AD%E5%BB%BA/" target="_blank" rel="noopener">http://www.lining0806.com/%E5%9F%BA%E4%BA%8Escrapy%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E7%9A%84%E6%90%AD%E5%BB%BA/</a></h3><p><a href="https://github.com/lining0806/PythonSpiderNotes" target="_blank" rel="noopener">https://github.com/lining0806/PythonSpiderNotes</a><br>更详细的资料参考</p>
</div></div><a class="button-hover more" href="/2019/11/30/爬虫大体结构/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/11/30/BeautifulSoup(cheat sheet)/">BeautifulSoup PyQuery(cheat sheet)</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-12-04</time><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/Python库/">Python库</a></div></div><div class="post-content"><div class="main-content content"><h2 id="BeautifulSoup"><a href="#BeautifulSoup" class="headerlink" title="BeautifulSoup"></a>BeautifulSoup</h2><p>正则表达式的退位</p>
<ol>
<li><p>soup = BeautifulSoup(html,”lxml”)<br>soup.prettify()</p>
</li>
<li><p>soup.title.string  soup.title</p>
</li>
<li><p>type(soup.title)</p>
</li>
<li><p>soup.p[‘name’]</p>
</li>
<li><p>soup.p.contents</p>
</li>
<li><p>for i,child in enumerate(soup.p.children):<br> print(i,child)</p>
<p> for i,child in enumerate(soup.p.descendants):<br> print(i,child)</p>
</li>
<li><p>soup.a.parent<br> list(enumerate(soup.a.parent))<br> list(enumerate(soup.a.parents))</p>
</li>
<li><p>list(enumerate(soup.a.next_siblings))<br> list(enumerate(soup.a.previous_siblings))</p>
</li>
</ol>
<hr>
<ol>
<li><p>将混乱的代码格式化，并且将一些缺失的不规范的代码补全</p>
</li>
<li><p>有没有标签的区别</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The Documouse&apos;s story</span><br><span class="line"></span><br><span class="line">&lt;title&gt;The Documouse&apos;s story&lt;/title&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>类型（没啥用）</p>
</li>
<li><p>字段匹配</p>
</li>
<li><p>用列表的方式输出p</p>
</li>
<li><p>输出子节点，迭代器 下面输出的不同是内容还是会输出来的</p>
</li>
<li><p>父节点、list是放到一个array去了，parents是所有的</p>
</li>
<li><p>兄弟节点</p>
</li>
</ol>
<h2 id="PyQuery"><a href="#PyQuery" class="headerlink" title="PyQuery"></a>PyQuery</h2><ol>
<li><p>字符串初始化</p>
</li>
<li><p>URL初始化</p>
</li>
<li><p>文件初始化</p>
</li>
<li><p>基本CSS选择器 </p>
</li>
</ol>
<p>查找</p>
<ol start="5">
<li>子元素</li>
<li>父元素</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from pyquery import PyQuery as pq</span><br></pre></td></tr></table></figure>

<p>1.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">doc = pq(html)</span><br><span class="line">print(doc(&apos;li&apos;))</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">doc01 = pq(url =&apos;http://www.baidu.com&apos;)</span><br><span class="line">print(doc01(&apos;head&apos;))</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>4.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(doc(&apos;#container .list li&apos;))</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>find</li>
</ol>
</div></div><a class="button-hover more" href="/2019/11/30/BeautifulSoup(cheat sheet)/#more">阅读全文</a></div></div><div id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fas fa-angle-right"></i></a></div></div></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fas fa-user"></i></span><span id="busuanzi_value_site_uv"></span><span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fas fa-eye"></i></span><span id="busuanzi_value_site_pv"></span><span></span></div><div class="copyright">&copy;2017 ～ 2020 By Rr-shan</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/haruto.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>